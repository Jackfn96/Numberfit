{"version":3,"sources":["./src/app/sign-in/sign-in.page.html","./src/app/sign-in/sign-in-routing.module.ts","./src/app/sign-in/sign-in.module.ts","./src/app/sign-in/sign-in.page.scss","./src/app/sign-in/sign-in.page.ts"],"names":[],"mappings":"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","file":"sign-in-sign-in-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title><img class=\\\"header-image\\\" src=\\\"/assets/NumberfitLogo.png\\\"/></ion-title>\\n    <script type=\\\"module\\\" src=\\\"https://cdn.jsdelivr.net/npm/@ionic/core@next/dist/ionic/ionic.esm.js\\\"></script>\\n    <script nomodule src=\\\"https://cdn.jsdelivr.net/npm/@ionic/core@next/dist/ionic/ionic.js\\\"></script>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-content\\\">\\n  <ion-card class=\\\"welcome-card\\\">\\n    <ion-card-header>\\n      <ion-card-title class=\\\"welcome-card-title\\\">Sign In</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content class=\\\"welcome-card\\\">\\n      <form [formGroup]=\\\"signInFormGroup\\\">\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Username</ion-label>\\n          <ion-input formControlName=\\\"email\\\" type=\\\"email\\\"></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Password</ion-label>\\n          <ion-input formControlName=\\\"password\\\" type=\\\"password\\\"></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-button\\n          (click)=\\\"signIn()\\\" [disabled]=\\\"signInFormGroup.invalid\\\"\\n          expand=\\\"block\\\" fill=\\\"clear\\\">\\n          Sign In\\n        </ion-button>\\n      </form>\\n      <ion-button\\n        expand=\\\"block\\\" fill=\\\"clear\\\"\\n        routerLink=\\\"../register\\\" routerDirection=\\\"forward\\\">\\n        Register\\n      </ion-button>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SignInPage } from './sign-in.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SignInPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SignInPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SignInPageRoutingModule } from './sign-in-routing.module';\n\nimport { SignInPage } from './sign-in.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    SignInPageRoutingModule\n  ],\n  declarations: [SignInPage]\n})\nexport class SignInPageModule {}\n","export default \".center {\\n  text-align: center;\\n  margin-top: 40px;\\n}\\n\\n.button1 {\\n  width: 100px;\\n  margin-top: 40px;\\n  color: \\\"secondary\\\";\\n  size: \\\"medium\\\";\\n}\\n\\n.button2 {\\n  width: 100px;\\n  margin-top: 15px;\\n  color: \\\"secondary\\\";\\n  size: \\\"medium\\\";\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYW1lcy9naXRodWIvTnVtYmVyZml0L051bWJlcmZpdC9zcmMvYXBwL3NpZ24taW4vc2lnbi1pbi5wYWdlLnNjc3MiLCJzcmMvYXBwL3NpZ24taW4vc2lnbi1pbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0U7RUFDRSxrQkFBQTtFQUNBLGdCQUFBO0FDQUo7O0FER0U7RUFDRSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLGNBQUE7QUNBSjs7QURHRTtFQUNFLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtBQ0FKIiwiZmlsZSI6InNyYy9hcHAvc2lnbi1pbi9zaWduLWluLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAuY2VudGVyIHtcbiAgICB0ZXh0LWFsaWduOmNlbnRlcjsgXG4gICAgbWFyZ2luLXRvcDogNDBweDtcbiAgfVxuXG4gIC5idXR0b24xIHtcbiAgICB3aWR0aDogMTAwcHg7IFxuICAgIG1hcmdpbi10b3A6IDQwcHg7XG4gICAgY29sb3I6IFwic2Vjb25kYXJ5XCI7XG4gICAgc2l6ZTogXCJtZWRpdW1cIjsgXG4gIH1cblxuICAuYnV0dG9uMiB7XG4gICAgd2lkdGg6IDEwMHB4OyBcbiAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgIGNvbG9yOiBcInNlY29uZGFyeVwiO1xuICAgIHNpemU6IFwibWVkaXVtXCI7IFxuICB9IiwiLmNlbnRlciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogNDBweDtcbn1cblxuLmJ1dHRvbjEge1xuICB3aWR0aDogMTAwcHg7XG4gIG1hcmdpbi10b3A6IDQwcHg7XG4gIGNvbG9yOiBcInNlY29uZGFyeVwiO1xuICBzaXplOiBcIm1lZGl1bVwiO1xufVxuXG4uYnV0dG9uMiB7XG4gIHdpZHRoOiAxMDBweDtcbiAgbWFyZ2luLXRvcDogMTVweDtcbiAgY29sb3I6IFwic2Vjb25kYXJ5XCI7XG4gIHNpemU6IFwibWVkaXVtXCI7XG59Il19 */\"","import { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Component }       from '@angular/core';\nimport { Router }          from '@angular/router';\nimport { Md5 }             from 'ts-md5/dist/md5';\nimport { NativeStorage }   from '@ionic-native/native-storage/ngx';\nimport { AlertController } from '@ionic/angular';\nimport { HTTP }            from '@ionic-native/http/ngx';\n\n\n\n@Component({\n  selector    : 'app-sign-in',\n  templateUrl : './sign-in.page.html',\n  styleUrls   : ['./sign-in.page.scss'],\n})\n\nexport class SignInPage {\n\n  signInFormGroup : FormGroup;\n  server          : string = require('../config.json').server;\n  // server          : string = \"http://localhost:3000\";\n  cookie          : any;\n\n  constructor(\n    private nativeStorage   : NativeStorage,\n    private alertController : AlertController,\n    private router          : Router,\n    private http            : HTTP,\n    formBuilder             : FormBuilder,\n  ) {\n    // Get cookie from storage\n    this.cookie = this.nativeStorage.getItem('cookie');\n\n    // Initialise sign in form group\n    this.signInFormGroup = formBuilder.group({\n      email    : [\"\", [Validators.required]],\n      password : [\"\", [Validators.required]],\n    });\n\n  }\n\n  signIn(){\n    const credentials = {\n      'username' : this.signInFormGroup.value.email.toLowerCase(),\n      'password' : Md5.hashStr(this.signInFormGroup.value.password)\n    }\n\n    this.http.post(this.server + \"/login\",credentials,{})\n    .then(data => {\n      console.log(\"data:\",data.data)\n      // var user = JSON.parse(data.data);\n      // var user = data.data;\n      // console.log(\"user: \", user)\n      // console.log(\"response: \", data)\n      // this.nativeStorage.setItem('cookie', {cookie: user.cookie})\n      // .then(() => {\n      //   this.nativeStorage.setItem('user', {\n      //     username : user.username,\n      //     name     : user.name,\n      //     school   : user.school,\n      //     year     : user.year,\n      //     teacher  : user.teacher,\n      //   })\n      //   .then(() => {\n      //     // console.log(\"got to play\")\n      //     this.router.navigate(['/play'])\n      //   }, error => console.error('Error storing user', error));\n      // }, error => console.error('Error storing cookie', error));\n\n    })\n    .catch(error => {\n      console.log(\"error here\",error.error)\n      this.presentAlert();\n\n    });\n\n    // var DOM = this;\n    // var xhttp = new XMLHttpRequest();\n    // console.log(this.server)\n    // // Login request response handler\n    // xhttp.onreadystatechange = function() {\n    //   if (this.readyState == 4 && this.status == 200) {\n    //\n    //   } else if(this.status != 200) {\n    //     console.log(\"error occured:\",this.responseText);\n    //     DOM.presentAlert();\n    //   }\n    // };\n    // xhttp.open(\"POST\", this.server + \"/login\", true);\n    // xhttp.setRequestHeader(\"Content-type\", \"application/json\");\n    // xhttp.send(JSON.stringify(credentials));\n\n  }\n\n  presentAlert() {\n    const alert = document.createElement('ion-alert');\n    alert.header = 'Error';\n    alert.message = 'Please check your internet connection.';\n    alert.buttons = ['OK'];\n\n    document.body.appendChild(alert);\n    return alert.present();\n  }\n}\n"],"sourceRoot":"webpack:///"}