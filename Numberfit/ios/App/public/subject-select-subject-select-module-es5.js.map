{"version":3,"sources":["webpack:///src/app/subject-select/subject-select.page.html","webpack:///src/app/subject-select/subject-select-routing.module.ts","webpack:///src/app/subject-select/subject-select.module.ts","webpack:///src/app/subject-select/subject-select.page.scss","webpack:///src/app/subject-select/subject-select.page.ts"],"names":["routes","path","component","SubjectSelectPageRoutingModule","imports","forChild","exports","SubjectSelectPageModule","declarations","SubjectSelectPage","router","activatedRoute","subject","xhttpSubjects","XMLHttpRequest","xhttpDetails","DOM","subjects","onreadystatechange","readyState","status","JSON","parse","responseText","send","console","log","repeats","length","deletes","i","availableYears","includes","parseInt","year","splice","open","cookie","topic","radio","document","getElementById","gamemode","snapshot","paramMap","get","Number","textContent","addEventListener","navigate","selector","template"],"mappings":"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","file":"subject-select-subject-select-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title><img class=\\\"header-image\\\" src=\\\"/assets/NumberfitLogo.png\\\"/></ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content  class=\\\"ion-content\\\">\\n  <ion-card class=\\\"welcome-card\\\">\\n    <ion-card-header>\\n      <ion-card-title id=\\\"title\\\" class=\\\"welcome-card-title\\\">Subject Select</ion-card-title>\\n    </ion-card-header>\\n      <ion-radio-group\\n      id=\\\"radio-group\\\"\\n      allow-empty-selection=“false”\\n      *ngFor=\\\"let sub of subjects.availableTopics\\\">\\n      <ion-item>\\n        <ion-label>{{sub.Topic}}</ion-label>\\n        <ion-radio id={{sub.Topic}} slot=\\\"end\\\" (click)=onSelect(sub.Topic)></ion-radio>\\n      </ion-item>\\n      </ion-radio-group>\\n    <ion-button id=\\\"btn-play\\\" expand=\\\"block\\\" fill=\\\"clear\\\">\\n      Play Selected Subject\\n    </ion-button>\\n  </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SubjectSelectPage } from './subject-select.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubjectSelectPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SubjectSelectPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SubjectSelectPageRoutingModule } from './subject-select-routing.module';\n\nimport { SubjectSelectPage } from './subject-select.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SubjectSelectPageRoutingModule\n  ],\n  declarations: [SubjectSelectPage]\n})\nexport class SubjectSelectPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3N1YmplY3Qtc2VsZWN0L3N1YmplY3Qtc2VsZWN0LnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-subject-select',\n  templateUrl: './subject-select.page.html',\n  styleUrls: ['./subject-select.page.scss'],\n})\nexport class SubjectSelectPage implements OnInit {\n\n  public subject: string = \"Addition\";\n  public subjects: [];\n  cookie: string;\n\n  constructor(\n    public router: Router,\n    public activatedRoute: ActivatedRoute,\n  ) {\n\n      // this.cookie = this.activatedRoute.snapshot.paramMap.get('cookie');\n      // console.log(this.cookie);\n\n      // GET all subjects from Numberfit\n      var xhttpSubjects = new XMLHttpRequest();\n      var xhttpDetails = new XMLHttpRequest();\n      let DOM = this;\n\n      DOM.subjects = require('./default_subjects.json');\n\n      // Define the listener function for the GET request\n      xhttpSubjects.onreadystatechange = function() {\n        if (this.readyState == 4 && this.status == 200) {\n          // Subjects GOT now get details to check year group\n          DOM.subjects = JSON.parse(this.responseText)\n          xhttpDetails.send();\n        } else if(this.status != 200) {\n          console.log(\"GET request failed with satus \" + this.status)\n        }\n      };\n\n      // Define the listener function for the GET request\n      xhttpDetails.onreadystatechange = function() {\n        if (this.readyState == 4 && this.status == 200) {\n          console.log(\"GET details request succeeded\")\n          // Remove elements not available to that year\n          // By now availableTopics is an attribute of DOM.subjects\n          let repeats = DOM.subjects[\"availableTopics\"].length;\n          let deletes = 0;\n          for(var i=0; i<repeats; i++){\n            if(!DOM.subjects[\"availableTopics\"][i-deletes].availableYears.includes(\n              parseInt(JSON.parse(this.responseText).year))){\n                DOM.subjects[\"availableTopics\"].splice(i-deletes, 1)\n                deletes += 1;\n            }\n          }\n\n        } else if(this.status != 200) {\n          console.log(\"GET request failed with satus \" + this.status)\n        }\n      };\n\n      // Define and send the GET request\n      xhttpSubjects.open(\"GET\", \"http://api.numberfit.com:8081/getAvailableTopics\", true);\n      xhttpDetails.open(\"GET\", \"http://localhost:3000/myDetails?cookie=\" + this.cookie, true);\n      xhttpSubjects.send();\n\n    }\n\n  // Function called when radio button clicked\n  onSelect(topic){\n    // TODO:\n    // Deselct current one on click - stopped working when I\n    // changed it to programmatically fill the list.\n    const radio = document.getElementById(topic);\n    this.subject = topic;\n  };\n\n  ngOnInit() {\n    let gamemode = this.activatedRoute.snapshot.paramMap.get(\"gamemode\");\n    let DOM = this;\n\n    // Set the title according to the gamemode\n    if(Number(gamemode) === 0){\n      document.getElementById(\"title\").textContent = \"Single Player\";\n    } else {\n      document.getElementById(\"title\").textContent = \"Head-to-Head\";\n    }\n\n    // Add eventListener for form submission\n    document.getElementById(\"btn-play\").addEventListener(\"click\", function(){\n      // Navigate to the respective page\n      if(Number(gamemode) === 0){\n        DOM.router.navigate(['/play-single', DOM.subject]);\n      } else {\n        DOM.router.navigate(['/play-multi', DOM.subject]);\n      }\n    });\n\n  }\n\n}\n"]}