{"version":3,"sources":["./src/app/register/register.page.html","./src/app/register/register-routing.module.ts","./src/app/register/register.module.ts","./src/app/register/register.page.scss","./src/app/register/register.page.ts"],"names":[],"mappings":"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","file":"register-register-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <meta charset=\\\"UTF-8\\\">\\n  <ion-toolbar>\\n    <ion-title><img class=\\\"header-image\\\" src=\\\"/assets/NumberfitLogo.png\\\"/></ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-content\\\">\\n  <ion-card class=\\\"welcome-card\\\">\\n    <ion-card-header>\\n      <ion-title class=\\\"welcome-card-title\\\">Register New Account</ion-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <form [formGroup]=\\\"registerFormGroup\\\" action = \\\"http://localhost:3000/register\\\" method = \\\"GET\\\">\\n        <ion-item style=\\\"margin-top: 20px;\\\">\\n          <ion-label position=\\\"floating\\\">Name</ion-label>\\n          <ion-input formControlName=\\\"name\\\"></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Email</ion-label>\\n          <ion-input formControlName=\\\"email\\\" type=\\\"email\\\"></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Password</ion-label>\\n          <ion-input formControlName=\\\"password1\\\" type='password'></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Comfirm Password</ion-label>\\n          <ion-input formControlName=\\\"password2\\\" type='password'></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label>Year Group</ion-label>\\n          <ion-select\\n            formControlName=\\\"year\\\" multiple=\\\"false\\\"\\n            cancelText=\\\"Cancel\\\" okText=\\\"Select\\\" >\\n            <ion-select-option *ngFor=\\\"let year of yearGroups\\\" value={{year}}>\\n              {{year}}\\n            </ion-select-option>\\n          </ion-select>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label>School</ion-label>\\n          <ion-select\\n            formControlName=\\\"school\\\" id=\\\"schoolSelect\\\"\\n            multiple=\\\"false\\\" cancelText=\\\"Cancel\\\" okText=\\\"Select\\\">\\n            <ion-select-option *ngFor=\\\"let school of schoolList\\\" value={{school}}>\\n              {{school}}\\n            </ion-select-option>\\n\\n          </ion-select>\\n        </ion-item>\\n        <br>\\n        <ion-button\\n          (click)=\\\"register()\\\" [disabled]=\\\"registerFormGroup.invalid\\\"\\n          expand='block'>\\n          Register\\n      </ion-button>\\n      </form>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RegisterPageRoutingModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","export default \":root {\\n  --ion-safe-area-top: 20px;\\n  --ion-safe-area-bottom: 22px;\\n}\\n\\n.center {\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYW1lcy9naXRodWIvTnVtYmVyZml0L051bWJlcmZpdC9zcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQUE7RUFDQSw0QkFBQTtBQ0NGOztBRENBO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtBQ0VGIiwiZmlsZSI6InNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOnJvb3Qge1xuICAtLWlvbi1zYWZlLWFyZWEtdG9wOiAyMHB4O1xuICAtLWlvbi1zYWZlLWFyZWEtYm90dG9tOiAyMnB4O1xufVxuLmNlbnRlciB7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IGF1dG87XG59XG4iLCI6cm9vdCB7XG4gIC0taW9uLXNhZmUtYXJlYS10b3A6IDIwcHg7XG4gIC0taW9uLXNhZmUtYXJlYS1ib3R0b206IDIycHg7XG59XG5cbi5jZW50ZXIge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xufSJdfQ== */\"","import { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Component, OnInit } from '@angular/core';\nimport { Router }            from '@angular/router';\nimport { NativeStorage }     from '@ionic-native/native-storage/ngx';\nimport { Md5 }               from 'ts-md5/dist/md5';\n\n@Component({\n  selector    : 'app-register',\n  templateUrl : './register.page.html',\n  styleUrls   : ['./register.page.scss'],\n})\n\nexport class RegisterPage implements OnInit {\n\n  registerFormGroup : FormGroup;\n  server     : string;\n  cookie     : string;\n  yearGroups : Array<number>;\n  schoolList : Array<string>;\n\n  constructor(\n    private nativeStorage: NativeStorage,\n    private router: Router,\n    formBuilder: FormBuilder\n  ) {\n    // Get server from config file\n    this.server = require('../config.json').server;\n    // Get cookie from storage\n    this.nativeStorage.getItem('cookie')\n    .then((data) => {this.cookie = data.cookie});\n\n    this.registerFormGroup = formBuilder.group({\n      name      : [\"\", [Validators.required]],\n      email     : [\"\", [Validators.required, Validators.email]],\n      password1 : [\"\", [Validators.required]],\n      password2 : [\"\", [Validators.required]],\n      year      : [\"\", [Validators.required]],\n      school    : [\"\", [Validators.required]],\n    });\n    this.yearGroups = [1, 2, 3, 4, 5, 6];\n    this.schoolList = ['Loading...'];\n  }\n\n  ngOnInit() {\n    // get the schools from the DB\n    let schoolSelect = document.getElementById(\"schoolSelect\");\n  }\n\n  register(){\n    const DOM = this;\n\n    const password1 = this.registerFormGroup.value.password1;\n    const password2 = this.registerFormGroup.value.password2;\n\n    const credentials = {\n      username : this.registerFormGroup.value.email.toLowerCase(),\n      password : Md5.hashStr(password1),\n      name     : this.registerFormGroup.value.name,\n      year     : this.registerFormGroup.value.year,\n      school   : this.registerFormGroup.value.school,\n      teacher  : false,\n    };\n\n    console.log(credentials);\n\n    if(password1 == password2 && password1.length > 7){\n      var xhttp = new XMLHttpRequest();\n\n      xhttp.onreadystatechange = function() {\n        if (this.readyState == 4 && this.status == 200) {\n          DOM.cookie = JSON.parse(this.responseText).success\n          console.log(DOM.cookie);\n          DOM.nativeStorage.setItem('cookie', {cookie: DOM.cookie})\n          .then(\n            () => DOM.router.navigate(['/play']),\n            error => console.error('Error storing item', error)\n          );\n        } else if(this.status != 200) {\n          console.log(this.responseText);\n\n        }\n      };\n\n      xhttp.open('POST', this.server+'/register?', true);\n      xhttp.setRequestHeader(\"Content-type\", \"application/json\");\n      xhttp.send(JSON.stringify(credentials));\n\n    } else{\n      // error!!!\n      alert(\"Please ensure your password is at least 8 characters and matches the confirmation field\");\n    }\n\n  }\n\n}\n"],"sourceRoot":"webpack:///"}