{"version":3,"sources":["src/app/register/register.page.html","src/app/register/register-routing.module.ts","src/app/register/register.module.ts","src/app/register/register.page.scss","src/app/register/register.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <meta charset=\\\"UTF-8\\\">\\n  <ion-toolbar>\\n    <ion-title><img class=\\\"header-image\\\" src=\\\"/assets/NumberfitLogo.png\\\"/></ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-content\\\">\\n  <ion-card class=\\\"welcome-card\\\">\\n    <ion-card-header>\\n      <ion-card-title class=\\\"welcome-card-title\\\">Register New Account</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <form [formGroup]=\\\"registerFormGroup\\\" action = \\\"http://localhost:3000/register\\\" method = \\\"GET\\\">\\n        <ion-item style=\\\"margin-top: 20px;\\\">\\n          <ion-label position=\\\"floating\\\">Name</ion-label>\\n          <ion-input formControlName=\\\"name\\\"></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Email</ion-label>\\n          <ion-input formControlName=\\\"email\\\" type=\\\"email\\\"></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Password</ion-label>\\n          <ion-input formControlName=\\\"password1\\\" type='password'></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Comfirm Password</ion-label>\\n          <ion-input formControlName=\\\"password2\\\" type='password'></ion-input>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label>Year Group</ion-label>\\n          <ion-select\\n            formControlName=\\\"year\\\" multiple=\\\"false\\\"\\n            cancelText=\\\"Cancel\\\" okText=\\\"Select\\\" >\\n            <ion-select-option *ngFor=\\\"let year of yearGroups\\\" value={{year}}>\\n              {{year}}\\n            </ion-select-option>\\n          </ion-select>\\n        </ion-item>\\n        <br>\\n        <ion-item>\\n          <ion-label>School</ion-label>\\n          <ion-select\\n            formControlName=\\\"school\\\" id=\\\"schoolSelect\\\"\\n            multiple=\\\"false\\\" cancelText=\\\"Cancel\\\" okText=\\\"Select\\\">\\n            <ion-select-option *ngFor=\\\"let school of schoolList\\\" value={{school.name}}>\\n              {{school.name}}\\n            </ion-select-option>\\n\\n          </ion-select>\\n        </ion-item>\\n        <br>\\n        <ion-button\\n          (click)=\\\"register()\\\" [disabled]=\\\"registerFormGroup.invalid\\\"\\n          expand='block'>\\n          Register\\n      </ion-button>\\n      </form>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RegisterPage } from './register.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegisterPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegisterPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RegisterPageRoutingModule } from './register-routing.module';\n\nimport { RegisterPage } from './register.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RegisterPageRoutingModule\n  ],\n  declarations: [RegisterPage]\n})\nexport class RegisterPageModule {}\n","export default \":root {\\n  --ion-safe-area-top: 20px;\\n  --ion-safe-area-bottom: 22px;\\n}\\n\\n.center {\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYW1lcy9naXRodWIvTnVtYmVyZml0L051bWJlcmZpdC9zcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQUE7RUFDQSw0QkFBQTtBQ0NGOztBRENBO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtBQ0VGIiwiZmlsZSI6InNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOnJvb3Qge1xuICAtLWlvbi1zYWZlLWFyZWEtdG9wOiAyMHB4O1xuICAtLWlvbi1zYWZlLWFyZWEtYm90dG9tOiAyMnB4O1xufVxuLmNlbnRlciB7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IGF1dG87XG59XG4iLCI6cm9vdCB7XG4gIC0taW9uLXNhZmUtYXJlYS10b3A6IDIwcHg7XG4gIC0taW9uLXNhZmUtYXJlYS1ib3R0b206IDIycHg7XG59XG5cbi5jZW50ZXIge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xufSJdfQ== */\"","import { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Component } from '@angular/core';\nimport { NativeStorage }     from '@ionic-native/native-storage/ngx';\nimport { Router }            from '@angular/router';\nimport { HTTP }              from '@ionic-native/http/ngx';\nimport { Md5 }               from 'ts-md5/dist/md5';\n\n@Component({\n  selector    : 'app-register',\n  templateUrl : './register.page.html',\n  styleUrls   : ['./register.page.scss'],\n})\n\nexport class RegisterPage {\n\n  registerFormGroup : FormGroup;\n  server     : string;\n  cookie     : string;\n  yearGroups : Array<number>;\n  schoolList : Array<string>;\n\n  constructor(\n    private nativeStorage : NativeStorage,\n    private http          : HTTP,\n    private router        : Router,\n    formBuilder           : FormBuilder\n  ) {\n    // Get server from config file\n    this.server = require('../config.json').server;\n    // Get cookie from storage\n    this.nativeStorage.getItem('cookie')\n    .then((data) => {this.cookie = data.cookie});\n\n    this.registerFormGroup = formBuilder.group({\n      name      : [\"\", [Validators.required]],\n      email     : [\"\", [Validators.required, Validators.email]],\n      password1 : [\"\", [Validators.required]],\n      password2 : [\"\", [Validators.required]],\n      year      : [\"\", [Validators.required]],\n      school    : [\"\", [Validators.required]],\n    });\n    this.yearGroups = [1, 2, 3, 4, 5, 6];\n\n    this.http.get(this.server+\"/getSchools\",{},{})\n    .then(data => {\n      this.schoolList = JSON.parse(data.data).schools\n      console.log(\"schools:\", this.schoolList)\n\n    })\n    .catch(error => {\n      console.log(\"status\", error.status);\n      console.log(\"error\", error.error);\n      this.presentAlert(\"Connection\",\"Error retrieving available schools.\");\n\n    });\n  }\n\n  register(){\n\n    const password1 = this.registerFormGroup.value.password1;\n    const password2 = this.registerFormGroup.value.password2;\n\n    const credentials = {\n      username : this.registerFormGroup.value.email.toLowerCase(),\n      password : Md5.hashStr(password1),\n      name     : this.registerFormGroup.value.name,\n      year     : this.registerFormGroup.value.year,\n      school   : this.registerFormGroup.value.school,\n      teacher  : false,\n      mTeacher : \"-\",\n      points   : 0,\n    };\n\n    console.log(credentials);\n\n    if(password1 == password2 && password1.length > 7){\n\n      console.log(credentials)\n\n      this.http.setDataSerializer('json');\n      this.http.post(this.server + \"/register\", credentials, {'Content-Type': 'application/json'})\n      .then(data => {\n        var user = JSON.parse(data.data);\n        // console.log(\"user: \", user)\n        // console.log(\"response: \", data)\n        this.nativeStorage.setItem('cookie', {cookie: user.cookie})\n        .then(() => {\n          //save info\n          delete credentials[\"password\"]\n          this.nativeStorage.setItem('user', credentials)\n          .then(() => {\n            this.router.navigate(['/my-account'])\n          }, error => console.error('Error storing user', error));\n        }, error => console.error('Error storing cookie', error));\n\n      })\n      .catch(error => {\n        console.log(\"error here\",error.error)\n        this.presentAlert(\"Connection\",\"Error registering account.\");\n\n      });\n\n    } else{\n      // error!!!\n      this.presentAlert(\"Password\",\"Please choose a more secure password.\");\n    }\n  }\n\n  presentAlert(header, msg) {\n    const alert = document.createElement('ion-alert');\n    alert.header = header;\n    alert.message = msg;\n    alert.buttons = ['OK'];\n    document.body.appendChild(alert);\n    alert.present();\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"register-register-module-es5.js"}